(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0674e8a2"],{"22a3":function(t,r,a){},"26f4":function(t,r,a){"use strict";a("22a3")},7735:function(t,r,a){"use strict";a("b700")},"841c":function(t,r,a){"use strict";var e=a("d784"),s=a("825a"),c=a("1d80"),n=a("129f"),i=a("14c3");e("search",1,(function(t,r,a){return[function(r){var a=c(this),e=void 0==r?void 0:r[t];return void 0!==e?e.call(r,a):new RegExp(r)[t](String(a))},function(t){var e=a(r,t,this);if(e.done)return e.value;var c=s(t),o=String(this),d=c.lastIndex;n(d,0)||(c.lastIndex=0);var u=i(c,o);return n(c.lastIndex,d)||(c.lastIndex=d),null===u?-1:u.index}]}))},b675:function(t,r,a){"use strict";a.r(r);var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"products"},[a("v-breadcrumbs",{attrs:{items:t.links,divider:"/"}}),a("v-spacer"),a("v-container",{staticClass:"my-5",attrs:{fluid:""}},[a("v-row",{staticClass:"mb-8 mr-8",attrs:{justify:"end","align-content":"end"}},[a("Archived")],1),a("v-row",{staticClass:"mx-3",attrs:{wrap:""}},t._l(this.Array,(function(r){return a("v-col",{key:r.list_name,class:"list-group mx-2 "+r.list_status,attrs:{xs12:"",sm6:"",md2:""}},[t._v(" "+t._s(r.list_name)+" "),a("br"),a("Draggable",{staticClass:"list-group list-col my-3",attrs:{list:t.cards1(r.id),group:"cards"},on:{change:function(a){return t.cardMoved(r.id,a)}}},t._l(t.cards1(r.id),(function(e){return a("Card",{key:e.id,staticClass:"list-group-item",attrs:{card:e,listId:r.id,cardComments:t.commentsByCard(e.id),team:t.team,product:t.product(e.product_id)}})})),1)],1)})),1)],1),a("v-snackbar",{attrs:{color:"primary",timeout:t.snackbar.timeout},scopedSlots:t._u([{key:"action",fn:function(r){var e=r.attrs;return[a("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(r){t.snackbar.snackbar=!1}}},"v-btn",e,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.snackbar,callback:function(r){t.$set(t.snackbar,"snackbar",r)},expression:"snackbar.snackbar"}},[t._v(" "+t._s("You moved a card to "+t.snackbar.newListName)+" ")])],1)},s=[],c=a("1da1"),n=a("5530"),i=(a("96cf"),a("159b"),a("7db0"),a("d81d"),a("b0c0"),a("4de4"),a("dc59")),o=a("2f62"),d=a("ae8d"),u=a("f691"),l=a("b76a"),m=a.n(l),p={name:"Products",components:{Draggable:m.a,Card:d["a"],Archived:u["a"]},data:function(){return{Array:[{id:1,list_name:"Quotes",list_status:"Quotes",cards:[]},{id:2,list_name:"Technical Approval",list_status:"Technical",cards:[]},{id:3,list_name:"Purchase Approval",list_status:"Purchase",cards:[]},{id:4,list_name:"Activate Purchase",list_status:"Procurement",cards:[]},{id:5,list_name:"Follow Up",list_status:"Waiting",cards:[]},{id:6,list_name:"Quality Approval",list_status:"Quality",cards:[]}],fetchedProgrammeId:localStorage.getItem("LS_ROUTE_KEY"),programmeId:localStorage.getItem("LS_ROUTE_KEY"),snackbar:{newListName:"",snackbar:!1,timeout:2e7},update:!0}},watch:{update:function(){console.log(this.update)}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["d"])({products:function(t){return t.products.products},currentUser:function(t){return t.profile.userProfile},comments:function(t){return t.comments.comments},cards12:function(t){return t.cards.cards}})),Object(o["c"])(["getProgrammeById","getCardsByProgrammeId","getSuppliers","getTeamsByProgrammeId","getUsers","getLists","getProductById"])),{},{cards:function(){var t=this,r=this.getCardsByProgrammeId(this.fetchedProgrammeId),a=[];r.forEach((function(r){var e=t.products.find((function(t){return t.id===r.product_id}));0==e.archived&&a.push(r)}));var e=a.sort((function(t,r){return t.createdOn-r.createdOn}));return e.map((function(r){return t.Array[r.list_id-1].cards.push(r)})),a},links:function(){return void 0==this.programme?[{text:"Programmes",to:"/"}]:[{text:"Programmes",to:"/"},{text:"".concat(this.programme.name),to:"/programme/"+"".concat(this.fetchedProgrammeId)}]},lists:function(){var t=this.getLists();return t},programme:function(){var t=this.getProgrammeById(this.fetchedProgrammeId);return t},suppliers:function(){var t=this.getSuppliers();return t},team:function(){var t=this.getTeamsByProgrammeId(this.programme.id);return t},users:function(){var t=this.getUsers();return t}}),methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["getProducts","getProgrammes","getCards"])),{},{cardMoved:function(t,r){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,c,n,o,d,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=r.added||r.moved,void 0!=s){e.next=3;break}return e.abrupt("return");case 3:if(c=s.element,void 0!=c){e.next=6;break}return e.abrupt("return");case 6:return n=i["d"].collection("cards").doc(c.id),e.next=9,n.update({list_id:t});case 9:return a.snackbar.newListName=a.Array.find((function(r){return r.id===t})).list_name,a.snackbar.snackbar=!0,o=i["d"].collection("products").doc(c.product_id),e.next=14,o.update({status:a.Array[t-1].list_status});case 14:d=["technical_approver","purchase_approver","procurer","quality_approver"],u=d[t-2],l=a.products.find((function(t){return t.id===c.product_id})),void 0==a.team[u]?i["d"].collection("notifications").add({card_id:c.id,product:{product_name:l.name,product_id:l.id},programme:{programme_name:l.programme.programme_name,programme_id:l.programme.programme_id},user_id:c.creator,createdOn:new Date,status:a.Array[t-1].list_status}):a.team[u].users.forEach((function(r){i["d"].collection("notifications").add({card_id:c.id,product:{product_name:l.name,product_id:l.id},programme:{programme_name:l.programme.programme_name,programme_id:l.programme.programme_id},user_id:r.value,createdOn:new Date,status:a.Array[t-1].list_status})})),a.$store.dispatch("getNotifications");case 19:case"end":return e.stop()}}),e)})))()},cards1:function(t){var r=this.cards.filter((function(r){return r.list_id===t}));return r},commentsByCard:function(t){var r=this.comments.filter((function(r){return r.card_id===t}));return r},product:function(t){var r=this.getProductById(t);return r}}),created:function(){this.getProducts(),this.getProgrammes(),this.$store.dispatch("getLists"),this.$store.dispatch("getSuppliers"),this.$store.dispatch("getComments"),this.$store.dispatch("getTeams"),this.$store.dispatch("getLineItems"),this.$store.dispatch("getUsers")},mounted:function(){this.getCards()}},v=p,g=(a("26f4"),a("2877")),f=a("6544"),h=a.n(f),_=a("2bc5"),b=a("8336"),y=a("62ad"),C=a("a523"),P=a("0fd9"),k=a("2db4"),x=a("2fa4"),w=Object(g["a"])(v,e,s,!1,null,"1c17d389",null);r["default"]=w.exports;h()(w,{VBreadcrumbs:_["a"],VBtn:b["a"],VCol:y["a"],VContainer:C["a"],VRow:P["a"],VSnackbar:k["a"],VSpacer:x["a"]})},b700:function(t,r,a){},f691:function(t,r,a){"use strict";var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1200","data-cypress":"archivedDialog"},scopedSlots:t._u([{key:"activator",fn:function(r){var e=r.on,s=r.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",color:"primary",dark:"","data-cypress":"archivedDialogBtn"}},"v-btn",s,!1),e),[t._v(" Archived ")])]}}]),model:{value:t.dialog,callback:function(r){t.dialog=r},expression:"dialog"}},[a("v-card",{staticClass:"dialogHeight"},[a("v-card-actions",{staticClass:"pt-2 pr-2 align-right backgroundColorPrimary"},[a("v-spacer"),a("v-btn",{attrs:{color:"white",icon:"","x-small":"",text:"","data-cypress":"cardDialogCloseBtn"},on:{click:function(r){t.dialog=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-card-title",{staticClass:"mb-2 headline backgroundColorPrimary"},[t._v(" Archived Products ")]),a("v-row",{staticClass:"mt-0 mb-0 pt-0 pb-0",attrs:{justify:"center"}},[a("v-col",{staticClass:"mt-0 mb-0 pt-0 pb-0",attrs:{cols:"12",md:"4","align-self":"center"}},[a("v-text-field",{attrs:{label:"Search Products","data-cypress":"searchbar"},model:{value:t.search,callback:function(r){t.search=r},expression:"search"}})],1)],1),0!=t.searchedArchivedProducts?a("v-card-text",[a("v-row",{staticClass:"pr-7"},t._l(t.searchedArchivedProducts,(function(r){return a("v-card",{key:r.id,staticClass:"productCard",attrs:{id:"productCard",flat:"","data-cypress":"productCard"}},[a("router-link",{attrs:{to:{name:"Product",params:{id:r.id}}}},[a("v-row",{class:"product "+r.status},[a("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[a("div",{staticClass:"caption grey--text"},[t._v("Product Name")]),a("div",{staticClass:"card-text-black"},[t._v(t._s(r.name))])]),a("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[a("div",{staticClass:"caption grey--text"},[t._v("Person")]),a("div",{staticClass:"card-text-black"},[t._v(t._s(r.person))])]),a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("div",{staticClass:"caption grey--text"},[t._v("Edit date")]),a("div",{staticClass:"card-text-black"},[t._v(" "+t._s(t.dateOnly(r.updatedOn))+" ")])]),a("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[a("v-chip",{class:r.status+" white--text caption my-2 fixedSize justify-center",attrs:{small:"",color:""+t.chipColor(r.status)}},[t._v(" "+t._s(r.status)+" ")])],1),a("v-col",{attrs:{cols:"12",sm:"1",md:"1"}},[a("span",[a("v-btn",{attrs:{small:"",text:"",color:"grey"},on:{click:function(a){return a.preventDefault(),t.Unarchive(r.id)}}},[a("v-icon",{attrs:{left:"",small:""}},[t._v("unarchive")]),a("span",{staticClass:"caption text-lowercase"},[t._v("Unarchive")])],1)],1)])],1)],1)],1)})),1)],1):a("v-card-text",[a("v-row",{staticClass:"grey--text",attrs:{justify:"center","align-content":"center"}},[t._v(" No Products Archived ")])],1)],1)],1)},s=[],c=a("5530"),n=(a("4de4"),a("b0c0"),a("ac1f"),a("466d"),a("841c"),a("dc59")),i=a("2f62"),o={data:function(){return{dialog:!1,fetchedProgrammeId:this.$route.params.id,search:""}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(i["d"])({products:function(t){return t.products.products}})),Object(i["c"])(["getProgrammeById"])),{},{filteredProducts:function(){var t=this,r=this.products.filter((function(r){return r.programme.programme_id===t.fetchedProgrammeId&&!0===r.archived}));return r},programme:function(){var t=this.getProgrammeById(this.fetchedProgrammeId);return t},searchedArchivedProducts:function(){var t=this;return this.filteredProducts.filter((function(r){var a=r.name;if(a.toLowerCase().match(t.search.toLowerCase()))return r}))}}),methods:{chipColor:function(t){var r={Quotes:"teal lighten-1",Technical:"amber accent-2",Purchase:"orange",Procurement:"red",FollowUp:"light-green lighten-1",Quality:"indigo lighten-1"};return"".concat(r[t])},dateOnly:function(t){var r=new Date(1e3*t.seconds),a=r.getDate(),e=r.getMonth()+1,s=r.getFullYear(),c=s+"-"+e+"-"+a;return c},Unarchive:function(t){var r=n["d"].collection("products").doc(t);r.update({archived:!1})}},mounted:function(){}},d=o,u=(a("7735"),a("2877")),l=a("6544"),m=a.n(l),p=a("8336"),v=a("b0af"),g=a("99d9"),f=a("cc20"),h=a("62ad"),_=a("169a"),b=a("132d"),y=a("0fd9"),C=a("2fa4"),P=a("8654"),k=Object(u["a"])(d,e,s,!1,null,"268a9897",null);r["a"]=k.exports;m()(k,{VBtn:p["a"],VCard:v["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VChip:f["a"],VCol:h["a"],VDialog:_["a"],VIcon:b["a"],VRow:y["a"],VSpacer:C["a"],VTextField:P["a"]})}}]);
//# sourceMappingURL=chunk-0674e8a2.6aa041cb.js.map