(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c8b2a22"],{"19e6":function(t,r,a){},"841c":function(t,r,a){"use strict";var e=a("d784"),s=a("825a"),c=a("1d80"),i=a("129f"),n=a("14c3");e("search",1,(function(t,r,a){return[function(r){var a=c(this),e=void 0==r?void 0:r[t];return void 0!==e?e.call(r,a):new RegExp(r)[t](String(a))},function(t){var e=a(r,t,this);if(e.done)return e.value;var c=s(t),o=String(this),d=c.lastIndex;i(d,0)||(c.lastIndex=0);var u=n(c,o);return i(c.lastIndex,d)||(c.lastIndex=d),null===u?-1:u.index}]}))},b675:function(t,r,a){"use strict";a.r(r);var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"products"},[a("v-breadcrumbs",{attrs:{items:t.links,divider:"/"}}),a("v-spacer"),a("v-container",{staticClass:"my-5",attrs:{fluid:""}},[a("v-row",{staticClass:"mb-8 mr-8",attrs:{justify:"end","align-content":"end"}},[a("Archived")],1),a("v-row",{staticClass:"mx-3",attrs:{wrap:""}},t._l(this.Array,(function(r){return a("v-col",{key:r.list_name,class:"list-group mx-2 "+r.list_status,attrs:{xs12:"",sm6:"",md2:""}},[t._v(" "+t._s(r.list_name)+" "),a("br"),a("Draggable",{staticClass:"list-group list-col my-3",attrs:{list:t.cards1(r.id),group:"cards"},on:{change:function(a){return t.cardMoved(r.id,a)}}},t._l(t.cards1(r.id),(function(e){return a("Card",{key:e.id,staticClass:"list-group-item",attrs:{card:e,listId:r.id,cardComments:t.commentsByCard(e.id),team:t.team}})})),1)],1)})),1)],1),a("v-snackbar",{attrs:{color:"primary",timeout:t.snackbar.timeout},scopedSlots:t._u([{key:"action",fn:function(r){var e=r.attrs;return[a("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(r){t.snackbar.snackbar=!1}}},"v-btn",e,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.snackbar,callback:function(r){t.$set(t.snackbar,"snackbar",r)},expression:"snackbar.snackbar"}},[t._v(" "+t._s("You moved a card to "+t.snackbar.newListName)+" ")])],1)},s=[],c=a("1da1"),i=(a("96cf"),a("7db0"),a("b0c0"),a("159b"),a("4de4"),a("d81d"),a("b76a")),n=a.n(i),o=a("ae8d"),d=a("f691"),u=a("dc59"),l={name:"Products",components:{Draggable:n.a,Card:o["a"],Archived:d["a"]},data:function(){return{programmeId:String(this.$route.params.id),fetchedProgrammeId:this.$route.params.id,update:!0,Array:[{id:1,list_name:"Quotes",list_status:"Quotes",cards:[]},{id:2,list_name:"Technical Approval",list_status:"Technical",cards:[]},{id:3,list_name:"Purchase Approval",list_status:"Purchase",cards:[]},{id:4,list_name:"Activate Purchase",list_status:"Procurement",cards:[]},{id:5,list_name:"Follow Up",list_status:"Waiting",cards:[]},{id:6,list_name:"Quality Approval",list_status:"Quality",cards:[]}],snackbar:{snackbar:!1,timeout:2e7,newListName:""}}},watch:{update:function(){console.log(this.update)}},methods:{cardMoved:function(t,r){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,c,i,n,o,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=r.added||r.moved,void 0!=s){e.next=3;break}return e.abrupt("return");case 3:if(c=s.element,void 0!=c){e.next=6;break}return e.abrupt("return");case 6:return i=u["d"].collection("cards").doc(c.id),e.next=9,i.update({list_id:t});case 9:return a.snackbar.newListName=a.Array.find((function(r){return r.id===t})).list_name,a.snackbar.snackbar=!0,n=u["d"].collection("products").doc(c.product_id),e.next=14,n.update({status:a.Array[t-1].list_status});case 14:o=["technical_approver","purchase_approver","procurer","quality_approver"],d=o[t-2],l=a.products.find((function(t){return t.id===c.product_id})),void 0==a.team[d]?u["d"].collection("notifications").add({card_id:c.id,product:{product_name:l.name,product_id:l.id},programme:{programme_name:l.programme.programme_name,programme_id:l.programme.programme_id},user_id:c.creator,createdOn:new Date,status:a.Array[t-1].list_status}):a.team[d].users.forEach((function(r){u["d"].collection("notifications").add({card_id:c.id,product:{product_name:l.name,product_id:l.id},programme:{programme_name:l.programme.programme_name,programme_id:l.programme.programme_id},user_id:r.value,createdOn:new Date,status:a.Array[t-1].list_status})})),a.$store.dispatch("getNotifications");case 19:case"end":return e.stop()}}),e)})))()},commentsByCard:function(t){var r=this.comments.filter((function(r){return r.card_id===t}));return r},cards1:function(t){var r=this.cards.filter((function(r){return r.list_id===t}));return r}},computed:{products:function(){var t=this.$store.getters.getProducts;return t},programme:function(){var t=this.$store.getters.getProgrammeById(this.fetchedProgrammeId);return t},lists:function(){var t=this.$store.getters.getLists;return t},cards:function(){var t=this,r=this.$store.getters.getCardsByProgrammeId(this.programme.id),a=[];r.forEach((function(r){var e=t.products.find((function(t){return t.id===r.product_id}));0==e.archived&&a.push(r)}));var e=a.sort((function(t,r){return t.createdOn-r.createdOn}));return e.map((function(r){return t.Array[r.list_id-1].cards.push(r)})),a},suppliers:function(){var t=this.$store.getters.getSuppliers;return t},comments:function(){var t=this.$store.getters.getComments;return t},team:function(){var t=this.$store.getters.getTeamsByProgrammeId(this.programme.id);return t},user:function(){var t=this.$store.getters.getUserProfile;return t},users:function(){var t=this.$store.getters.getUserProfile;return t},links:function(){return void 0==this.programme?[{text:"Programmes",to:"/"}]:[{text:"Programmes",to:"/"},{text:"".concat(this.programme.name),to:"/programme/"+"".concat(this.fetchedProgrammeId)}]}},created:function(){this.$store.dispatch("getProducts"),this.$store.dispatch("getProgrammes"),this.$store.dispatch("getLists"),this.$store.dispatch("getSuppliers"),this.$store.dispatch("getComments"),this.$store.dispatch("getTeams"),this.$store.dispatch("getLineItems")},mounted:function(){this.$store.dispatch("getCards")}},m=l,p=(a("f3d6"),a("2877")),v=a("6544"),h=a.n(v),g=a("2bc5"),f=a("8336"),_=a("62ad"),b=a("a523"),C=a("0fd9"),y=a("2db4"),k=a("2fa4"),x=Object(p["a"])(m,e,s,!1,null,"047ece0b",null);r["default"]=x.exports;h()(x,{VBreadcrumbs:g["a"],VBtn:f["a"],VCol:_["a"],VContainer:b["a"],VRow:C["a"],VSnackbar:y["a"],VSpacer:k["a"]})},c366:function(t,r,a){},efb5:function(t,r,a){"use strict";a("c366")},f3d6:function(t,r,a){"use strict";a("19e6")},f691:function(t,r,a){"use strict";var e=function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"1200","data-cypress":"archivedDialog"},scopedSlots:t._u([{key:"activator",fn:function(r){var e=r.on,s=r.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",color:"primary",dark:"","data-cypress":"archivedDialogBtn"}},"v-btn",s,!1),e),[t._v(" Archived ")])]}}]),model:{value:t.dialog,callback:function(r){t.dialog=r},expression:"dialog"}},[a("v-card",{staticClass:"dialogHeight"},[a("v-card-actions",{staticClass:"pt-2 pr-2 align-right backgroundColorPrimary"},[a("v-spacer"),a("v-btn",{attrs:{color:"white",icon:"","x-small":"",text:"","data-cypress":"cardDialogCloseBtn"},on:{click:function(r){t.dialog=!1}}},[a("v-icon",[t._v("clear")])],1)],1),a("v-card-title",{staticClass:"mb-2 headline backgroundColorPrimary"},[t._v(" Archived Products ")]),a("v-row",{staticClass:"noMargin",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"12",col:"4"}}),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-text-field",{attrs:{label:"Search Products","data-cypress":"searchbar"},model:{value:t.search,callback:function(r){t.search=r},expression:"search"}})],1),a("v-col",{attrs:{cols:"12",col:"4"}})],1),0!=t.searchedArchivedProducts?a("v-card-text",{staticClass:"maxHeight"},t._l(t.searchedArchivedProducts,(function(r){return a("v-card",{key:r.id,staticClass:" productCard",attrs:{id:"productCard",flat:"","data-cypress":"productCard"}},[a("router-link",{attrs:{to:{name:"Product",params:{id:r.id}}}},[a("v-row",{class:"product "+r.status},[a("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[a("div",{staticClass:"caption grey--text"},[t._v("Product Name")]),a("div",{staticClass:"card-text-black"},[t._v(t._s(r.name))])]),a("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[a("div",{staticClass:"caption grey--text"},[t._v("Person")]),a("div",{staticClass:"card-text-black"},[t._v(t._s(r.person))])]),a("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[a("div",{staticClass:"caption grey--text"},[t._v("Edit date")]),a("div",{staticClass:"card-text-black"},[t._v(" "+t._s(t.dateOnly(r.updatedOn))+" ")])]),a("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[a("v-chip",{class:r.status+" white--text caption my-2 fixedSize justify-center",attrs:{small:"",color:""+t.chipColor(r.status)}},[t._v(" "+t._s(r.status)+" ")])],1),a("v-col",{attrs:{cols:"12",sm:"1",md:"1"}},[a("span",[a("v-btn",{attrs:{small:"",text:"",color:"grey"},on:{click:function(a){return a.preventDefault(),t.Unarchive(r.id)}}},[a("v-icon",{attrs:{left:"",small:""}},[t._v("unarchive")]),a("span",{staticClass:"caption text-lowercase"},[t._v("Unarchive")])],1)],1)])],1)],1)],1)})),1):a("v-card-text",[a("v-row",{staticClass:"grey--text",attrs:{justify:"center","align-content":"center"}},[t._v(" No Products Archived ")])],1)],1)],1)},s=[],c=a("5530"),i=(a("4de4"),a("b0c0"),a("ac1f"),a("466d"),a("841c"),a("dc59")),n=a("2f62"),o={data:function(){return{search:"",dialog:!1,fetchedProgrammeId:this.$route.params.id}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(n["d"])({products:function(t){return t.products.products}})),Object(n["c"])(["getProgrammeById"])),{},{programme:function(){var t=this.getProgrammeById(this.fetchedProgrammeId);return t},filteredProducts:function(){var t=this,r=this.products.filter((function(r){return r.programme.programme_id===t.fetchedProgrammeId&&!0===r.archived}));return r},searchedArchivedProducts:function(){var t=this;return this.filteredProducts.filter((function(r){var a=r.name;if(a.toLowerCase().match(t.search.toLowerCase()))return r}))}}),methods:{chipColor:function(t){var r={Quotes:"teal lighten-1",Technical:"amber accent-2",Purchase:"orange",Procurement:"red",FollowUp:"light-green lighten-1",Quality:"indigo lighten-1"};return"".concat(r[t])},dateOnly:function(t){var r=new Date(1e3*t.seconds),a=r.getDate(),e=r.getMonth()+1,s=r.getFullYear(),c=s+"-"+e+"-"+a;return c},Unarchive:function(t){var r=i["d"].collection("products").doc(t);r.update({archived:!1})}},mounted:function(){}},d=o,u=(a("efb5"),a("2877")),l=a("6544"),m=a.n(l),p=a("8336"),v=a("b0af"),h=a("99d9"),g=a("cc20"),f=a("62ad"),_=a("169a"),b=a("132d"),C=a("0fd9"),y=a("2fa4"),k=a("8654"),x=Object(u["a"])(d,e,s,!1,null,"6c0b0272",null);r["a"]=x.exports;m()(x,{VBtn:p["a"],VCard:v["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VChip:g["a"],VCol:f["a"],VDialog:_["a"],VIcon:b["a"],VRow:C["a"],VSpacer:y["a"],VTextField:k["a"]})}}]);
//# sourceMappingURL=chunk-3c8b2a22.a71e4afd.js.map